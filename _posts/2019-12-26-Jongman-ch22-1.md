---
title : Ch.22.1 이진 검색 트리

categories:
- jongman

tags:
- jongman
---

# 22.1 도입

> 트리는 계측정 구조를 표현하는 것 외에도 다양한 용도로 사용되며, 그중 대표적인 것이 검색트리(search
> tree) 입니다.
- 검색트리는 리스트나 큐처럼 자료들을 담는 컨테이너지만, 자료들을 일정한 순서에 따라 정렬한 상태로
  저장해 둡니다.
- 이것은 입력이 주어진 순서에 따라 자료들을 배치하는 리스트나 큐와는 다른 속성입니다.


> 검색 트리 중 가장 흔하게 사용되는 것이 바로 이 장에서 소개할 이진 검색 트리(binary search tree)와
> 그 변종들입니다.


# 22.2 이진 검색트리의 정의와 조작

## 정의

- 이진 검색트리를 정의하기 위해서는 이진 트리(binary tree)의 정의가 필요합니다.

> 이진 트리란 각 노드가 왼쪽과 오른쪽, 최대 두 개의 자식 노드만을 가질 수 있는 트리를 의미합니다.
- 따라서 이진 트리는 자식 노드들의 배열 대신 두 개의 포인터 left와 right를 담는 객체로 구현됩니다.

> 이진 검색 트리는 이진 탐색(binary search)에서 아이디어를 가져와서 만든 트리입니다.
- 우리가 N개의 원소 중에서 원하는 값을 찾는데, 매번 후보의 수를 절반씩 줄여나갈 수 있다면 O(logN)
  시간에 그 값을 찾을 수 있지요.

- 이진 검색 트리의 각 노드는 하나의 원소를 가지고 있습니다.
- 각 노드의 왼쪽 서브 트리에는 해당 노드의 원소보다 작은 원소를 가진 노드들이,
- 오른쪽 서브트리에는 보다 큰 원소를 가진 노드들이 들어갑니다.

## 순회

> 이진 검색트리를 중위 순회하면 크기 순서로 정렬된 원소의 목록을 얻을 수 있습니다.
- 현재 노드가 가진 원소보다 작은 원소들은 모두 왼쪽 서브트리에 있고,
- 그보다 큰 원소들은 모두 오른쪽 서브트리에 있기 때문입니다.
- 트리를 중위 순회하면 정렬된 결과를 얻을 수 있다는 말은, 집합에 포함된 최대 원소나 최소
  원소를 쉽게 얻을 수 있다는 뜻이기도 합니다.

## 자료의 검색

- 이진 검색 트리에서는 아주 간단하게 특정 원소가 존재하는지 확인할 수 있습니다.
- 매번 좌/우 서브트리 중 한 쪽으로 범위를 줄여나갈 수 있으므로, 실질적으로 이진 탐색과 비슷한 속도로
  자료를 찾을 수 있게 됩니다.

## 조작

> 이진 검색 트리가 진가를 드러내는 곳은 집합에 원소를 추가하거나 삭제하는 조작 연산을 할 때 입니다.


- 원소를 삽입하는 경우
    - 정렬된 배열에 새 원소를 삽입하기 위해서는 삽입할 위치를 우선 찾고,
    - 그 이후에 있는 원소들을 모두 한 칸씩 뒤로 옮겨야 합니다.
    - 하지만 이진 검색 트리에는 선형적인 구조의 제약이 없기 때문에,
    - 새 원소가 들어갈 위치를 찾고 거기에 노드를 추가하기만 하면 간단히 새 원소를 추가할 수
      있습니다.

- 원소를 삭제하는 경우
    - 단연코 이진 검색 트리에서 가장 까다로운 연산입니다.
    - 이진 검색트리에서 삭제를 구현하는 방법은 여러가지 있지만, 그중 간편한 방법으로 '합치기'연산을
      구현하는 것이 있습니다.


## X보다 작은 원소의 수 찾기 / k번째 원소 찾기

- 이진 검색트리가 주어질 때 주어진 값 X보다 작은 원소가 몇 개 있는지
- 크기 순으로 정렬했을 때 앞에서부터 k번째 원소는 무엇인지 찾는 연산들이 필요할 떄가 종종 있습니다.
- 표준 라이브러리에서 대게 지원하지 않기에, 필요할 경우 직접 구현할 수 밖에 없습니다.
- 실제 구현은 트립의 구현을 다루는 22.6절에 포함되어 있습니다.

# 22.3 시간 복잡도 분석과 균형 잡힌 이진 검색 트리

- 이진 검색 트리에 대한 모든 연산은 모두 루트에서부터 한 단계씩 트리를 내려가며 재귀 호출을 통해
  수행되므로, 최대 재귀 호출의 횟수는 트리의 높이 h와 같습니다.
  - 따라서 모든 연산의 시간 복잡도가 트리의 높이 O(h)라고 할 수 있습니다.

- 하지만, 이진 검색 트리의 높이는 자료들이 어떤 순서로 추가되고 삭제되느냐에 따라 크게 달라집니다.
- 예를 들어 1, 2, 3, 4를 순서대로 추가한 경우
    - 1 - 2 - 3 - 4 가 일렬로 연결되어, 트리의 높이는 N-1이 됩니다.
    - 이런 트리를 '기울어졌다'(skewed)라고 합니다.
    - 이런 경우 연결리스트를 쓰는 것과 마찬가지가 되어버립니다.

- 우리가 원하는 이상적인 케이스는 가급적 가로로 넓게 퍼지고 '평평한' 트리입니다.
- 평평한 경우 트리의 최소 높이는 O(logN)이 됩니다.

> 이와 같은 단점을 개선한 이진 검색 트리의 변종들이 여러 가지 있는데, 이들을 균형 잡힌 이진 검색
> 트리(balanced binary search tree)라고 부릅니다.
- 이들은 트리의 구조에 추가적인 제약을 정하고 이 제약이 만족되도록 노드들을 옮겨서 트리의 높이가
  항상 O(logN)이 되도록 유지합니다.
- 이들의 대표적인 예로 레드-블랙 트리(red-black tree)가 있습니다.
